<!DOCTYPE html>
<html lang="en">
<head>
  <title>View Info</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="https://www.holacases.com/res/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.holacases.com/res/font-awesome.min.css"> 
  <link rel="stylesheet" href="https://www.holacases.com/res/bootstrap-social.css">   

</head>

<!-- read url parameters & get data -->
<script>

  document.getElementById("display-data").style.display = "none";
  document.getElementById("no-data").style.display = "none";
  const params = new URLSearchParams(window.location.search);
   
  const uid = params.get('uid');
  const disp = params.get('disp');
  
  const url = "https://us-central1-authtest-4c6b4.cloudfunctions.net/getUserInfo?uid="+uid+"&disp="+disp;
  
  fetch(url)
    .then((response) => {
      return response.json()
    })
    .then((data) => {
      set_preview_values(data);
      document.getElementById("no-data").style.display = "none";
      document.getElementById("loading").style.display = "none";
      if(data.premium_credits>0) document.getElementById("footer-branding").style.display = "none";
      document.getElementById("display-data").style.display = "block";
    })
    .catch((err) => {
      document.getElementById("loading").style.display = "none";
      document.getElementById("display-data").style.display = "none";
      document.getElementById("no-data").style.display = "block";
    })
  
  </script>

<body style="height:700px">

  <div class="container text-center" id="loading" style="display: block;">  
    <br/><br/><br/><br/><br/>
    <div class="spinner-border mt-2" style="width: 3rem; height: 3rem;" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <br/><br/>
    Loading...  
</div>

<div class="container text-center" id="no-data" style="display: none;">  
  <br/><br/><br/><br/><br/>
  <h2>No data found.</h2>
  
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-bottom" id="footer-branding-default">
    <a class="btn btn-block text-white" target="_blank" href="https://www.holacases.com">Powered by HolaCase</a>
  </nav>
</div>

<div class="container text-center" id="display-data" style="display: none;" >

  <div class="col">


    <div class="text-center">
      
      <h4 id="greeting1-p2-preview"></h4>  

      <h5 id="greeting2-p2-preview"></h5>            

      <img class="img-thumbnail mb-2" id="image-p2-preview" src="#" style="max-height:140px;"> 

      <p class="text-break text-wrap" id="intro-p2-preview">Brief intro here.</p>
      
      <a class="btn btn-outline-light btn-block text-dark border-dark mb-2" id="contact-p2-preview" onclick=downloadVcf(vcard_p2_name,vcard_p2_data); ><i class="fa fa-user"></i>+  Add Phone Contact</a>

      <div class="row no-gutters">
        <div class="col mb-2" id="weblink1-container-p2-preview">
        <a class="btn btn-primary btn-block mr-1" style="background-color:#337AB7" id="weblink1-p2-preview" href="#" target="_blank" rel="noopener nofollow external noreferrer">Link 1</a>
        </div>  
        <div class="col mb-2" id="weblink2-container-p2-preview">
        <a class="btn btn-primary btn-block ml-1" style="background-color:#337AB7" id="weblink2-p2-preview" href="#" target="_blank" rel="noopener nofollow external noreferrer">Link 2</a>
        </div>  
      </div>  

      <div class="row no-gutters">
        <div class="col mb-2" id="weblink3-container-p2-preview">
        <a class="btn btn-info btn-block mr-1" id="weblink3-p2-preview" href="#" target="_blank" rel="noopener nofollow external noreferrer">Link 3</a>
        </div>  
        <div class="col mb-2" id="weblink4-container-p2-preview">
        <a class="btn btn-info btn-block ml-1" id="weblink4-p2-preview" href="#" target="_blank" rel="noopener nofollow external noreferrer">Link 4</a>
        </div>  
      </div> 

    </div>

    <div class="d-flex flex-wrap justify-content-center text-center">

      <div class="col-xs-3 p-2" id="linkedin-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-linkedin" id="linkedin-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-linkedin"></span></a></div>

      <div class="col-xs-3 p-2" id="twitter-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-twitter" id="twitter-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-twitter"></span></a></div>

      <div class="col-xs-3 p-2" id="instagram-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-instagram" id="instagram-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-instagram"></span></a></div>

      <div class="col-xs-3 p-2" id="snapchat-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-snapchat" id="snapchat-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-snapchat-ghost"></span></a></div>

      <div class="col-xs-3 p-2" id="youtube-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-youtube" id="youtube-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-youtube"></span></a></div>
  
      <div class="col-xs-3 p-2" id="facebook-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-facebook" id="facebook-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-facebook"></span></a></div>   
      
      <div class="col-xs-3 p-2" id="reddit-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-reddit" id="reddit-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-reddit"></span></a></div>   

      <div class="col-xs-3 p-2" id="pinterest-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-pinterest" id="pinterest-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-pinterest"></span></a></div>   

      <div class="col-xs-3 p-2" id="github-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-github" id="github-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-github"></span></a></div>

      <div class="col-xs-3 p-2" id="quora-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-quora" id="quora-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-quora"></span></a></div>

      <div class="col-xs-3 p-2" id="tumblr-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-tumblr" id="tumblr-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-tumblr"></span></a></div>
      
      <div class="col-xs-3 p-2" id="soundcloud-container-p2-preview"> <a href="#" class="btn btn-social-icon btn-lg btn-soundcloud" id="soundcloud-p2-preview" target="_blank" rel="noopener nofollow external noreferrer"><span class="fa fa-soundcloud"></span></a></div>
      

    </div>

      <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-bottom" id="footer-branding">
        <a class="btn btn-block text-white" target="_blank" href="https://www.holacases.com">Powered by HolaCase</a>
      </nav>
      
  </div>

  
</div>


</body>



<script>
  function set_preview_values(profile){
  
  // SET VALUES OF FIELDS
  if(profile.premium_credits > 0)document.getElementById("footer-branding").style.display = "none";
  else document.getElementById("footer-branding").style.display = "block";

   document.getElementById("greeting1-p2-preview").innerHTML = profile.greeting1; 
   document.getElementById("greeting2-p2-preview").innerHTML = profile.greeting2; 
   document.getElementById("image-p2-preview").src = profile.image; 
   document.getElementById("intro-p2-preview").innerHTML = profile.intro; 
   
   vcard_p2_data = vcard_create(profile.fname,profile.lname,profile.company,profile.title,profile.phone1,profile.phone2,profile.email,profile.website,profile.street,profile.city,profile.zip,profile.state,profile.country);
   vcard_p2_name = profile.fname+" "+profile.lname+".vcf";
  
   document.getElementById("weblink1-p2-preview").href = profile.weblink1;
   document.getElementById("weblink1-p2-preview").innerHTML = profile.weblink1_desc;
   document.getElementById("weblink2-p2-preview").href = profile.weblink2; 
   document.getElementById("weblink2-p2-preview").innerHTML = profile.weblink2_desc;  

   document.getElementById("weblink3-p2-preview").href = profile.weblink3;
   document.getElementById("weblink3-p2-preview").innerHTML = profile.weblink3_desc;
   document.getElementById("weblink4-p2-preview").href = profile.weblink3; 
   document.getElementById("weblink4-p2-preview").innerHTML = profile.weblink3_desc;     
  
   document.getElementById("linkedin-p2-preview").href = profile.linkedin; 
   document.getElementById("twitter-p2-preview").href = profile.twitter; 
   document.getElementById("instagram-p2-preview").href = profile.instagram; 
   document.getElementById("snapchat-p2-preview").href = profile.snapchat; 
  
   document.getElementById("youtube-p2-preview").href = profile.youtube; 
   document.getElementById("facebook-p2-preview").href = profile.facebook; 
   document.getElementById("reddit-p2-preview").href = profile.reddit; 
   document.getElementById("pinterest-p2-preview").href = profile.pinterest;
  
   document.getElementById("github-p2-preview").href = profile.github; 
   document.getElementById("quora-p2-preview").href = profile.quora; 
   document.getElementById("tumblr-p2-preview").href = profile.tumblr; 
   document.getElementById("soundcloud-p2-preview").href = profile.soundcloud;
  
  // HIDE EMPTY BUTTONS / FIELDS
  
  if (profile.greeting1.length === 0) {document.getElementById("greeting1-p2-preview").style.display ="none";} else {document.getElementById("greeting1-p2-preview").style.display ="block";} 
  if (profile.greeting2.length === 0) {document.getElementById("greeting2-p2-preview").style.display ="none";} else {document.getElementById("greeting2-p2-preview").style.display ="block";} 
  
  if (profile.image.length === 0) {document.getElementById("image-p2-preview").style.display ="none";} else {document.getElementById("image-p2-preview").style.display ="block";document.getElementById("image-p2-preview").style ="max-height:140px;";} 
  
  if (profile.fname.length === 0) {document.getElementById("contact-p2-preview").style.display ="none";} else {document.getElementById("contact-p2-preview").style.display ="block";} 

  if (profile.weblink1.length === 0) {document.getElementById("weblink1-container-p2-preview").style.display ="none";} else {document.getElementById("weblink1-container-p2-preview").style.display ="block";} 
  if (profile.weblink2.length === 0) {document.getElementById("weblink2-container-p2-preview").style.display ="none";} else {document.getElementById("weblink2-container-p2-preview").style.display ="block";} 
  if (profile.weblink3.length === 0) {document.getElementById("weblink3-container-p2-preview").style.display ="none";} else {document.getElementById("weblink3-container-p2-preview").style.display ="block";} 
  if (profile.weblink4.length === 0) {document.getElementById("weblink4-container-p2-preview").style.display ="none";} else {document.getElementById("weblink4-container-p2-preview").style.display ="block";}   

  if (profile.linkedin.length === 0) {document.getElementById("linkedin-container-p2-preview").style.display ="none";} else {document.getElementById("linkedin-container-p2-preview").style.display ="block";} 
  if (profile.twitter.length === 0) {document.getElementById("twitter-container-p2-preview").style.display ="none";} else {document.getElementById("twitter-container-p2-preview").style.display ="block";} 
  if (profile.instagram.length === 0) {document.getElementById("instagram-container-p2-preview").style.display ="none";} else {document.getElementById("instagram-container-p2-preview").style.display ="block";} 
  if (profile.snapchat.length === 0) {document.getElementById("snapchat-container-p2-preview").style.display ="none";} else {document.getElementById("snapchat-container-p2-preview").style.display ="block";} 
  
  if (profile.youtube.length === 0) {document.getElementById("youtube-container-p2-preview").style.display ="none";} else {document.getElementById("youtube-container-p2-preview").style.display ="block";} 
  if (profile.facebook.length === 0) {document.getElementById("facebook-container-p2-preview").style.display ="none";} else {document.getElementById("facebook-container-p2-preview").style.display ="block";} 
  if (profile.reddit.length === 0) {document.getElementById("reddit-container-p2-preview").style.display ="none";} else {document.getElementById("reddit-container-p2-preview").style.display ="block";} 
  if (profile.pinterest.length === 0) {document.getElementById("pinterest-container-p2-preview").style.display ="none";} else {document.getElementById("pinterest-container-p2-preview").style.display ="block";} 
  
  if (profile.github.length === 0) {document.getElementById("github-container-p2-preview").style.display ="none";} else {document.getElementById("github-container-p2-preview").style.display ="block";} 
  if (profile.quora.length === 0) {document.getElementById("quora-container-p2-preview").style.display ="none";} else {document.getElementById("quora-container-p2-preview").style.display ="block";} 
  if (profile.tumblr.length === 0) {document.getElementById("tumblr-container-p2-preview").style.display ="none";} else {document.getElementById("tumblr-container-p2-preview").style.display ="block";} 
  if (profile.soundcloud.length === 0) {document.getElementById("soundcloud-container-p2-preview").style.display ="none";} else {document.getElementById("soundcloud-container-p2-preview").style.display ="block";} 
  
  
  }
  
  </script>

<!--  Function to create vcard  -->  
<script>
  function vcard_create(fname,lname,company,job_title,phone_mobile,phone_work,email,website,street,city,zip,state,country) {
  
     var vc_content ="BEGIN:VCARD\nVERSION:3.0\n";
  
     if(fname||lname){vc_content = vc_content.concat("N:" + lname + ";" + fname + ";;" +"\n");}
     if(fname||lname){vc_content = vc_content.concat("FN:" + fname + " " + lname +"\n");}
     if(company){vc_content = vc_content.concat("ORG:" + company +"\n");}
     if(job_title){vc_content = vc_content.concat("TITLE:" + job_title +"\n");}
     if(phone_mobile){vc_content = vc_content.concat("TEL;TYPE=CELL:" + phone_mobile +"\n");}
     if(phone_work){vc_content = vc_content.concat("TEL;TYPE=WORK:" + phone_work +"\n");}   
     if(email){vc_content = vc_content.concat("EMAIL;TYPE=WORK:" + email +"\n");}     
     if(website){vc_content = vc_content.concat("URL:" + website +"\n");}     
     if(street||city||zip||state||country){vc_content = vc_content.concat("ADR;TYPE=WORK:" +";;" + street + ";" + city + ";" + state + ";" + zip + ";" + country  +"\n");}       
     
     vc_content = vc_content.concat("END:VCARD");    
  
     return (vc_content);    
      }
  </script>
  
  
  <!--  Function to create & download vcard file -->  

<script>
  function downloadVcf(filename, data) {
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/vcard;charset=utf-8,' + encodeURIComponent(data));
    element.setAttribute('download', filename);
  
    element.style.display = 'none';
    document.body.appendChild(element);
  
    element.click();
  
    document.body.removeChild(element);
  }
  </script>

</html>

  